<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <!-- La balise viewport rend la page responsive sur mobile et tablette.
         width=device-width adapte la largeur √† l'√©cran,
         initial-scale=1.0 emp√™che le zoom automatique. -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transmission S√©curis√©e - Canal Chiffr√©</title>
    <!-- Lien vers le fichier CSS externe (s√©paration structure/style) -->
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- ============================================
         HEADER GLOBAL
         M√™me barre de navigation que sur toutes les pages
         pour garder une coh√©rence de site.
         La classe "active" indique la page courante.
    ============================================ -->
    <header>
        <div class="header-content">
            <div class="brand">LE RECENSEMENT</div>
            <nav>
                <a href="home.html" class="nav-link">Accueil</a>
                <a href="hotspot.html" class="nav-link">HotSpot</a>
                <a href="mutants.html" class="nav-link">Mutants</a>
                <a href="superiors.html" class="nav-link">Homo Superior</a>
                <!-- "active" sur cette page car c'est la page courante -->
                <a href="transmission.html" class="nav-link active">Transmission</a>
            </nav>
        </div>
    </header>

    <main>

        <!-- ============================================
             SECTION TITRE DE PAGE
             Donne le contexte imm√©diat √† l'utilisateur.
             R√©utilise la classe commune "page-title-section"
             d√©finie dans le CSS pour toutes les pages.
        ============================================ -->
        <section class="page-title-section">
            <h1>üì° TRANSMISSION S√âCURIS√âE ‚Äî CANAL CHIFFR√â</h1>
            <p class="subtitle">
                Ce canal est r√©serv√© aux observateurs terrain. 
                Toute information sera trait√©e de mani√®re confidentielle.
            </p>
        </section>

        <!-- ============================================
             SECTION PRINCIPALE : ALERTE + FORMULAIRE
             Contient le message d'accroche et le formulaire
             de t√©moignage complet.
        ============================================ -->
        <section class="transmission-section">

            <!-- BLOC D'AVERTISSEMENT
                 Stylis√© comme un message d'alerte officiel
                 pour renforcer l'immersion dans l'univers Trask. -->
            <div class="transmission-alert">
                <span class="alert-icon">‚ö†Ô∏è</span>
                <p>
                    Si vous avez observ√© quelque chose de <strong>surnaturel</strong>, 
                    un comportement anormal, ou un individu pr√©sentant des capacit√©s 
                    hors du commun, <strong>d√©posez vos t√©moignages ici</strong>.
                </p>
                <p class="alert-sub">
                    Vos donn√©es sont transmises via un canal s√©curis√©. 
                    Ne mentionnez jamais votre identit√© r√©elle.
                </p>
            </div>

            <!-- ============================================
                 FORMULAIRE DE T√âMOIGNAGE
                 
                 ‚ö†Ô∏è Pas de action="mailto:" ni de enctype ici !
                 L'envoi est g√©r√© par JavaScript (fonction sendTestimony)
                 pour encoder correctement les accents et caract√®res sp√©ciaux.
                 
                 onsubmit="sendTestimony(); return false;"
                 ‚Üí sendTestimony() : appelle notre fonction JS d'envoi.
                 ‚Üí return false : emp√™che le rechargement de la page
                   (comportement par d√©faut d'un formulaire HTML).
            ============================================ -->
            <form class="transmission-form" 
                  id="testimony-form"
                  onsubmit="sendTestimony(); return false;">

                <!-- CHAMP : NOM DE CODE
                     L'attribut "required" emp√™che l'envoi si le champ est vide.
                     Le navigateur affiche automatiquement un message d'erreur. -->
                <div class="form-group">
                    <label for="codename">NOM DE CODE / IDENTIFIANT</label>
                    <input type="text" 
                           id="codename" 
                           name="Nom_de_code" 
                           placeholder="Ex: Observateur-7, Anonyme..."
                           required>
                </div>

                <!-- CHAMP : LIEU
                     type="text" est le type par d√©faut pour une saisie libre. -->
                <div class="form-group">
                    <label for="location">üìç LIEU DE L'OBSERVATION</label>
                    <input type="text" 
                           id="location" 
                           name="Lieu" 
                           placeholder="Ex: Brooklyn, NY ‚Äî Parking souterrain, 3e niveau"
                           required>
                </div>

                <!-- CHAMP : DATE ET HEURE
                     type="datetime-local" affiche un s√©lecteur de date/heure natif
                     dans le navigateur (pas besoin de librairie externe). -->
                <div class="form-group">
                    <label for="datetime">üïê DATE ET HEURE DE L'OBSERVATION</label>
                    <input type="datetime-local" 
                           id="datetime" 
                           name="Date_heure">
                </div>

                <!-- CHAMP : TYPE DE PH√âNOM√àNE
                     La balise <select> cr√©e un menu d√©roulant.
                     La premi√®re <option> avec "disabled selected" sert de placeholder :
                     elle est affich√©e par d√©faut mais ne peut pas √™tre soumise. -->
                <div class="form-group">
                    <label for="phenomenon">TYPE DE PH√âNOM√àNE</label>
                    <select id="phenomenon" name="Type_phenomene" required>
                        <option value="" disabled selected>‚Äî S√©lectionnez ‚Äî</option>
                        <option value="Capacit√© physique anormale">Capacit√© physique anormale</option>
                        <option value="Manifestation √©nerg√©tique">Manifestation √©nerg√©tique</option>
                        <option value="Alt√©ration de l'environnement">Alt√©ration de l'environnement</option>
                        <option value="T√©l√©portation / Disparition">T√©l√©portation / Disparition</option>
                        <option value="M√©tamorphose">M√©tamorphose</option>
                        <option value="Ph√©nom√®ne psychique">Ph√©nom√®ne psychique / T√©l√©pathie</option>
                        <option value="Technologie inconnue">Technologie inconnue</option>
                        <option value="Autre">Autre (pr√©ciser dans le rapport)</option>
                    </select>
                </div>

                <!-- CHAMP : NIVEAU D'URGENCE (Boutons radio)
                     Les boutons radio partagent le m√™me attribut name="Urgence"
                     ce qui garantit qu'un seul peut √™tre coch√© √† la fois.
                     "checked" sur "Mod√©r√©" le pr√©-s√©lectionne par d√©faut. -->
                <div class="form-group">
                    <label>NIVEAU D'URGENCE ESTIM√â</label>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="Urgence" value="Faible"> 
                            <span class="radio-custom low">FAIBLE</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="Urgence" value="Mod√©r√©" checked>
                            <span class="radio-custom medium">MOD√âR√â</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="Urgence" value="√âlev√©">
                            <span class="radio-custom high">√âLEV√â</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="Urgence" value="Critique">
                            <span class="radio-custom critical">CRITIQUE</span>
                        </label>
                    </div>
                </div>

                <!-- CHAMP : RAPPORT D√âTAILL√â
                     <textarea> permet une saisie de texte multi-lignes.
                     L'attribut "rows" d√©finit la hauteur visible initiale. -->
                <div class="form-group">
                    <label for="report">üìù RAPPORT D√âTAILL√â</label>
                    <textarea id="report" 
                              name="Rapport" 
                              rows="8" 
                              placeholder="D√©crivez ce que vous avez observ√© avec le maximum de d√©tails : apparence du sujet, dur√©e du ph√©nom√®ne, t√©moins √©ventuels..."
                              required></textarea>
                </div>

                <!-- CHAMP : CASE √Ä COCHER DE CONSENTEMENT
                     L'attribut "required" sur la checkbox oblige l'utilisateur
                     √† la cocher avant de pouvoir soumettre le formulaire. -->
                <div class="form-group checkbox-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="consent" required>
                        <span>Je confirme que ces informations sont transmises 
                        sous protocole Trask et que mon identit√© restera confidentielle.</span>
                    </label>
                </div>

                <!-- BOUTONS D'ACTION
                     type="submit" d√©clenche la validation HTML5 (v√©rifie les "required")
                     puis appelle la fonction sendTestimony() d√©finie dans le onsubmit.
                     type="reset" remet tous les champs √† leur valeur initiale. -->
                <div class="form-actions">
                    <button type="submit" class="btn-transmit">
                        üì° TRANSMETTRE LE RAPPORT
                    </button>
                    <button type="reset" class="btn-reset">
                        EFFACER
                    </button>
                </div>

            </form>

            <!-- ============================================
                 BLOC D'INFORMATIONS COMPL√âMENTAIRES
                 Donne du contexte narratif suppl√©mentaire
                 et renforce l'ambiance "agence secr√®te".
            ============================================ -->
            <div class="transmission-info">
                <h4>üìã PROTOCOLE DE TRANSMISSION</h4>
                <ul>
                    <li>Toutes les transmissions sont horodat√©es et archiv√©es automatiquement.</li>
                    <li>N'utilisez jamais votre vrai nom ‚Äî un nom de code suffit.</li>
                    <li>En cas de danger imm√©diat, ne restez pas sur place.</li>
                    <li>Les rapports sont analys√©s sous 24 √† 48 heures par nos √©quipes.</li>
                    <li>Canal maintenu par Trask Industries ‚Äî Division Observation Terrain.</li>
                </ul>
            </div>

        </section>

    </main>

    <!-- ============================================
         FOOTER
         Identique sur toutes les pages pour la coh√©rence.
    ============================================ -->
    <footer id="contact">
        <p>Ce site n'est pas affili√© officiellement √† Trask Industries.</p>
        <p>Canal de transmission actif ‚Äî Protocole Sentinelle v2.4</p>
    </footer>

    <!-- ============================================
         SCRIPTS
         Le fichier script.js contient la fonction sendTestimony()
         qui g√®re l'encodage UTF-8 et l'ouverture du client mail.
         Il contient aussi la v√©rification d'acc√®s (sessionStorage).
    ============================================ -->
    <script src="script.js"></script>
    <script>
        // V√©rification de s√©curit√© : si l'utilisateur n'est pas pass√© par le login,
        // sessionStorage ne contient pas 'accessGranted' et on le redirige.
        if (sessionStorage.getItem('accessGranted') !== 'true') {
            window.location.href = 'index.html';
        }
    </script>

</body>
</html>
